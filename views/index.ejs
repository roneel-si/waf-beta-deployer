<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>WAF Beta Deployer</title>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
		/>
		<link
			rel="stylesheet"
			href="<%= basePath %>/static/css/style.css?v=<%= Date.now() %>"
		/>
	</head>
	<body>
		<div class="container">
			<header class="my-4">
				<h1 class="text-center">WAF Beta Deployer</h1>
				<p class="text-center text-muted">
					Execute client deployment scripts
				</p>
			</header>

			<div class="row">
				<div class="col-md-4">
					<div class="card">
						<div class="card-header">
							<h5>Available Clients</h5>
						</div>
						<div class="card-body">
							<div class="list-group">
								<% scripts.forEach(script => { %>
								<button
									class="list-group-item list-group-item-action d-flex justify-content-between align-items-center script-item"
									data-script="<%= script.name %>"
								>
									<%= script.clientName %>
									<span class="badge bg-primary rounded-pill">
										<i class="bi bi-play-fill"></i>
									</span>
								</button>
								<% }); %>
							</div>
						</div>
					</div>
				</div>

				<div class="col-md-8">
					<div class="card">
						<div
							class="card-header d-flex justify-content-between align-items-center"
						>
							<h5 id="current-script">
								Select a client to deploy
							</h5>
							<div>
								<button
									id="execute-btn"
									class="btn btn-primary"
									disabled
								>
									Deploy
								</button>
								<button
									id="clear-btn"
									class="btn btn-secondary"
								>
									Clear Output
								</button>
							</div>
						</div>
						<div class="card-body">
							<div id="terminal" class="terminal">
								<div id="output" class="w-100">
									Welcome to WAF Beta Deployer. Select a
									client from the list to deploy.
								</div>
							</div>
						</div>
						<div class="card-footer">
							<div id="status" class="text-muted">Ready</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script>
			// Pass base path to client-side JavaScript
			window.basePath = "<%= basePath %>";
		</script>
		<script src="<%= basePath %>/static/js/main.js?v=<%= Date.now() %>"></script>
	</body>
</html>
